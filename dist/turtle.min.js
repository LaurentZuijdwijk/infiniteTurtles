(function(){var t,o,r,i,n,s,e,h,u,a,p,f=function(t,o){return function(){return t.apply(o,arguments)}},c=function(t,o){function r(){this.constructor=t}for(var i in o)d.call(o,i)&&(t[i]=o[i]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t},d={}.hasOwnProperty,l=[].slice;t=t=function(){function t(t,o,r,i){this.r=t,this.g=o,this.b=r,this.opacity=null!=i?i:1}return t.prototype.toString=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.opacity+")"},t.prototype.setHue=function(t){var o;return t>360&&(t%=360),o=this.toHSL(),o.H=t,this.fromHSL(o.H,o.S,o.L)},t.prototype.getHue=function(){return this.toHSL().H},t.prototype.toHSL=function(){var t,o,r,i,n,s,e,h,u,a,p,f;return f=this.r/255,u=this.g/255,i=this.b/255,a=Math.max(f,u,i),p=Math.min(f,u,i),n=a-p,console.log(a,p,n),o=(a+p)/2,0===n?(console.log("zero delta",n,0===n),t=0,r=0):(r=.5>o?n/(a+p):n/(2-a-p),h=((a-f)/6+n/2)/n,e=((a-u)/6+n/2)/n,s=((a-i)/6+n/2)/n,f===a?t=s-e:u===a?t=1/3+h-s:i===a&&(t=2/3+e-h)),0>t&&(t+=1),t>1&&(t-=1),{H:360*t,S:100*r,L:100*o}},t.prototype.fromHSL=function(t,o,r){var i,n,s;return i=function(t,o,r){return 0>r&&(r+=1),r>1&&(r-=1),1>6*r?t+6*(o-t)*r:1>2*r?o:2>3*r?t+(o-t)*(2/3-r)*6:t},t/=360,o/=100,r/=100,0===o?(this.r=255*r,this.g=255*r,this.b=255*r):(s=.5>r?r*(1+o):r+o-o*r,n=2*r-s,this.r=255*i(n,s,t+1/3),this.g=255*i(n,s,t),this.b=255*i(n,s,t-1/3)),[this.r,this.g,this.b]},t}(),p={"function":!0,object:!0},p[typeof exports]&&exports&&!exports.nodeType&&exports&&(n=exports),p[typeof module]&&module&&!module.nodeType&&module&&(e=module),n&&e&&"object"==typeof global&&global&&(s=!0),p[typeof self]&&self&&self.Object&&self&&(h=!0),p[typeof window]&&window&&window.Object&&window&&(u=!0),e&&e.exports===n&&n&&(a=!0),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root.Color=_,define(function(){return t})):n&&e?a?(console.log("moduleExports"),(e.exports=t).Color=t):(console.log("freeExports"),n.Color=t):(console.log("root"),root.Color=t),r=function(){function t(t){this.canvasId=t,this.keepDrawing=f(this.keepDrawing,this),this.doDraw=f(this.doDraw,this),this.draw=f(this.draw,this),this.job=f(this.job,this),this.canvas=document.getElementById(this.canvasId),this.ctx=this.canvas.getContext("2d"),this.ctx.globalCompositeOperation="screen",this.drawer=new i(this.canvas),this.commands=[]}return t.prototype.background=function(t){var o,r;return r=this.canvas.width,o=this.canvas.height,this.ctx.fillStyle=t,this.ctx.fillRect(0,0,r,o)},t.prototype.job=function(t){var o,r;return r=this,new(o=function(){function t(t){this.fn=t}return t.prototype.before=function(){},t.prototype.run=function(){return console.log(r,this),this.beforeEach.apply(r),this.fn.apply(r)},t}())(t)},t.prototype.forward=function(t,o){return null==o&&(o=0),this.commands.push({fn:this.drawer.forward,args:t,mod:o}),this},t.prototype.turn=function(t,o){return null==o&&(o=0),this.commands.push({fn:this.drawer.turn,args:t,mod:o}),this},t.prototype.color=function(t,o){return this.commands.push({fn:this.drawer.color,args:t,mod:o}),this},t.prototype.lineWidth=function(t,o){return this.commands.push({fn:this.drawer.lineWidth,args:t,mod:o}),this},t.prototype.moveX=function(t,o){return this.commands.push({fn:this.drawer.moveX,args:t,mod:o}),this},t.prototype.moveY=function(t,o){return this.commands.push({fn:this.drawer.moveY,args:t,mod:o}),this},t.prototype.setX=function(t,o){return this.commands.push({fn:this.drawer.setX,args:t,mod:o}),this},t.prototype.setY=function(t,o){return this.commands.push({fn:this.drawer.setY,args:t,mod:o}),this},t.prototype.draw=function(t){return this.n=0,this.drawing=!0,t?this.doDraw(t):this.keepDrawing()},t.prototype.stop=function(){return this.drawing=!1,this.drawer.finish()},t.prototype.doDraw=function(t){var o,r,i,n,s,e,h,u;for(r=i=1,h=t;h>=1?h>=i:i>=h;r=h>=1?++i:--i)for(u=this.commands,n=0,s=u.length;s>n;n++)o=u[n],"number"==typeof o.mod?(e=o.mod?o.mod*r:1,o.fn.apply(this.drawer,[o.args,e])):"function"==typeof o.mod?o.fn.apply(this.drawer,[o.args,o.mod(r)]):o.fn.apply(this.drawer,[o.args]);return this.stop()},t.prototype.keepDrawing=function(){var t,o,r,i,n,s,e;if(this.drawing){for(o=r=0;10>=r;o=++r)for(this.n=this.n+1,e=this.commands,i=0,n=e.length;n>i;i++)t=e[i],"number"==typeof t.mod?(s=t.mod?t.mod*this.n:1,t.fn.apply(this.drawer,[t.args,s])):"function"==typeof t.mod?t.fn.apply(this.drawer,[t.args,t.mod(this.n)]):t.fn.apply(this.drawer,[t.args]);return window.requestAnimationFrame(function(t){return function(){return t.keepDrawing()}}(this)),this}},t.prototype.finish=function(){return this.drawer.finish(),this},t}(),require&&(t=require("./color")),i=function(){function o(t){this.canvas=t,this.lineWidth=f(this.lineWidth,this),this.forward=f(this.forward,this),this.ctx=this.canvas.getContext("2d")}return o.prototype.angle=360*Math.random(),o.prototype.x=800,o.prototype.y=200,o.prototype._color=new t(70,70,0,.03),o.prototype._lineWidth=1,o.prototype.finish=function(){},o.prototype.forward=function(t,o){return this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y),this.ctx.lineWidth=this._lineWidth,this.ctx.strokeStyle=this._color.toString(),this.x+=(t+o)*Math.cos(this.angle*(Math.PI/180)),this.y+=(t+o)*Math.sin(this.angle*(Math.PI/180)),this.ctx.lineTo(this.x,this.y),this.ctx.stroke(),this},o.prototype.color=function(t){return this._color=t,this},o.prototype.moveX=function(t,o){return null==o&&(o=0),this.x+=t+o,this},o.prototype.moveY=function(t,o){return null==o&&(o=0),this.y+=t+o,this},o.prototype.setX=function(t,o){return null==o&&(o=0),this.x=t+o,this},o.prototype.setY=function(t,o){return null==o&&(o=0),this.y=t+o,this},o.prototype.lineWidth=function(t,o){return this._lineWidth=t+o,this},o.prototype.turn=function(t,o){return this.angle+=t+o,this},o}(),o=function(o){function r(o){var r,n,s,e,h;for(this.offsetX=30,this.offsetY=30,this.drawers=[],n=s=0;2>=s;n=s+=1)this.drawers[n]=new i(o);h=new i(o);for(e in h)r=h[e],"function"==typeof r&&!function(t){return function(o){return t[o]=function(){var t,r,i,n,s,e;for(t=1<=arguments.length?l.call(arguments,0):[],s=this.drawers,e=[],i=0,n=s.length;n>i;i++)r=s[i],e.push(function(r){return r[o].apply(r,t)}(r));return e}}}(this)(e,r);this.color=function(o){return this._color=o,this.drawers[0].color(new t(this._color.r,0,0,this._color.opacity/3)),this.drawers[1].color(new t(0,this._color.g,0,this._color.opacity/3)),this.drawers[2].color(new t(0,0,this._color.b,this._color.opacity/3)),this},this.setX=function(t,o){return null==o&&(o=0),this.drawers[0].setX(t,o),this.drawers[1].setX(t+this.offsetX,o),this.drawers[2].setX(t+2*this.offsetX,o),this},this.moveX=function(t,o){return null==o&&(o=0),this.drawers[0].moveX(t,o),this.drawers[1].moveX(t+this.offsetX,o),this.drawers[2].moveX(t+2*this.offsetX,o),this},this.setY=function(t,o){return null==o&&(o=0),this.drawers[0].setY(t,o),this.drawers[1].setY(t+this.offsetY,o),this.drawers[2].setY(t+2*this.offsetY,o),this},this.moveY=function(t,o){return null==o&&(o=0),this.drawers[0].moveY(t,o),this.drawers[1].moveY(t+this.offsetY,o),this.drawers[2].moveY(t+2*this.offsetY,o),this}}return c(r,o),r}(i)}).call(this);